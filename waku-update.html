<!DOCTYPE html>
<html class="h-full" lang="en-US">
  <head>
  
  <title>Vac - Waku Update</title>
  

  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>Vac</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link
    rel="shortcut icon"
    href="/assets/img/favicon.png"
    type="image/png"
  />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;1,400;1,600&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/assets/css/style.css" />
</head>

  <body class="h-full flex flex-col">
    <div
      class="flex-grow container max-w-screen-xl mx-auto px-5 md:px-12 lg:pt-6"
    >
      <header>
  <div class="container max-w-screen-xl sm:border-b">
    <div
      class="
        nav-section
        flex
        justify-between
        items-center
        py-3
        md:py-5
        lg:py-10
      "
    >
      <div class="logo md:pr-8 l:p-0">
        <a href="/"
          ><img src="/assets/img/logo.png"
        /></a>
      </div>
      <div class="flex justify-between items-center w-9/12">
        <div class="burger block sm:hidden z-50">
          <button
            class="
              burger__button burger__button--open
              fixed
              top-2
              right-5
              w-12
              h-12
            "
            type="button"
            aria-label="Mobile menu button"
          >
            <img
              class="burger__icon"
              src="/assets/img/burger.svg"
              alt="Open menu button"
            />
          </button>
          <button
            class="
              burger__button burger__button--close
              hidden
              fixed
              top-2
              right-5
              w-12
              h-12
            "
            type="button"
            aria-label="Close mobile menu button"
          >
            <img
              class="burger__icon burger__icon--close"
              src="/assets/img/close.svg"
              alt="Close menu button"
            />
          </button>
        </div>

        <nav class="nav max-w-screen-xm md:max-w-screen-sl container">
          <ul
            class="
              nav__list
              hidden
              sm:flex
              justify-between
              container
              text-xs
              font-semibold
              md:pr-8
              l:p-0
            "
          >
             <li class="hover:opacity-50">
  
  <a class="nav__link" href="/#work">Work</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/#about">About</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/#join">Join VAC</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/research-log">Research log</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/media">Media</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a href="https://specs.vac.dev" target="_blank" rel="noopener noreferrer"
    >Specs</a
  >
  
</li>
  <li class="hover:opacity-50">
  
  <a href="https://forum.vac.dev/" target="_blank" rel="noopener noreferrer"
    >Forum</a
  >
  
</li>
 
          </ul>
        </nav>

        <ul class="social items-center hidden md:flex">
          <li class="pr-5">
  <a href="https://twitter.com/vacp2p" target="_blank" rel="noopener noreferrer"
    ><svg
      width="25"
      height="21"
      viewBox="0 0 25 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="hover:opacity-50"
    >
      <path
        d="M24.8872 3.04499C23.9872 3.43499 23.0572 3.70498 22.0672 3.82499C23.0872 3.22498 23.8672 2.26499 24.2272 1.09499C23.2672 1.66499 22.2172 2.05499 21.1072 2.29499C20.2072 1.33499 18.9172 0.734985 17.5072 0.734985C14.7772 0.734985 12.5872 2.95499 12.5872 5.65499C12.5872 6.04499 12.6172 6.40498 12.7072 6.76498C8.62721 6.58498 5.02721 4.60498 2.59721 1.63499C0.857207 4.75498 2.80721 7.33499 4.09721 8.20499C3.31721 8.20499 2.53721 7.96499 1.87721 7.60499C1.87721 10.035 3.58721 12.045 5.80721 12.495C5.32721 12.645 4.24721 12.735 3.58721 12.585C4.21721 14.535 6.04721 15.975 8.17721 16.005C6.49721 17.325 4.03721 18.375 0.887207 18.045C3.07721 19.455 5.65721 20.265 8.44721 20.265C17.5072 20.265 22.4272 12.765 22.4272 6.28499C22.4272 6.07499 22.4272 5.86499 22.3972 5.65499C23.4172 4.90499 24.2572 4.03499 24.8872 3.04499Z"
        fill="#151512"
      />
    </svg>
  </a>
</li>
<li class="pr-5">
  <a href="https://github.com/vacp2p" target="_blank" rel="noopener noreferrer"
    ><svg
      width="26"
      height="25"
      viewBox="0 0 26 25"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="hover:opacity-50"
    >
      <path
        d="M12.8857 0.856567C6.26021 0.856567 0.915339 6.20154 0.950043 12.7951C0.9778 18.0687 4.43935 22.5427 9.21766 24.1227C9.81824 24.2327 10.0353 23.864 10.0336 23.5474C10.0321 23.2635 10.0177 22.5129 10.0065 21.5171C6.67274 22.238 5.95552 19.9163 5.95552 19.9163C5.40376 18.5369 4.61433 18.1698 4.61433 18.1698C3.51994 17.4296 4.69151 17.4444 4.69151 17.4444C5.89646 17.5291 6.53549 18.6751 6.53549 18.6751C7.61609 20.4989 9.35182 19.9727 10.0342 19.6665C10.1382 18.8951 10.4459 18.3689 10.7878 18.0702C8.12222 17.7684 5.31483 16.7443 5.29076 12.1708C5.2839 10.8672 5.74629 9.80152 6.50989 8.96619C6.3838 8.66445 5.96641 7.45009 6.61027 5.80766C6.61027 5.80766 7.61658 5.4866 9.9167 7.03094C10.8723 6.76636 11.8976 6.63408 12.9191 6.62962C13.9376 6.63556 14.9658 6.76636 15.9257 7.03242C18.2081 5.48809 19.2163 5.80914 19.2163 5.80914C19.8789 7.45306 19.4743 8.66594 19.3529 8.96767C20.1268 9.80301 20.5959 10.8687 20.6028 12.1723C20.6269 16.7577 17.8272 17.767 15.1558 18.0628C15.5882 18.4314 15.976 19.1597 15.9819 20.273C15.9903 21.8693 15.9821 23.1565 15.9841 23.5474C15.9858 23.867 16.2038 24.2386 16.8122 24.1212C21.5663 22.5397 24.9778 18.0672 24.95 12.7951C24.9153 6.20154 19.5142 0.856567 12.8857 0.856567Z"
        fill="#151512"
      />
    </svg>
  </a>
</li>
<li>
  <a
    href="https://discord.gg/PQFdubGt6d"
    target="_blank"
    rel="noopener noreferrer"
    ><svg
      width="25"
      height="21"
      viewBox="0 0 25 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="hover:opacity-50"
    >
      <path
        d="M22.7861 9.04256C21.8482 5.74455 20.7799 4.04048 20.7627 4.00991C20.7017 3.93459 19.189 2.104 15.5271 0.75L15.0353 2.0764C16.7774 2.72057 18.0116 3.50643 18.6899 4.01419C16.6599 3.40408 14.2431 3.03041 12.1008 3.03041C9.95851 3.03041 7.53775 3.40408 5.50128 4.01419C6.18496 3.50648 7.42744 2.72057 9.17631 2.0764L8.69846 0.75C5.02238 2.104 3.49044 3.93459 3.42863 4.00991C3.41108 4.04048 2.32479 5.74455 1.35221 9.04256C0.414855 12.2208 0.0415214 16.7045 0.027872 16.8843C0.109225 17.0131 1.97891 20.25 7.12077 20.25L8.43406 18.3536C6.97595 17.964 5.58693 17.3357 4.31689 16.4832L5.10228 15.3069C7.15122 16.6822 9.54509 17.4092 12.0251 17.4092C14.5051 17.4092 16.9067 16.6822 18.9701 15.3069L19.7431 16.4832C18.4641 17.3357 17.0684 17.964 15.6062 18.3536L16.8995 20.25C22.0414 20.25 23.9452 17.0131 24.0279 16.8843C24.0161 16.7045 23.69 12.2208 22.7861 9.04256ZM8.79853 12.7392H7.39228L7.40468 10.3841H8.81093L8.79853 12.7392ZM16.7071 12.7392H15.3008L15.3132 10.3841H16.7195L16.7071 12.7392Z"
        fill="#151512"
      />
    </svg>
  </a>
</li>

        </ul>
      </div>

      <div
        class="
          overlay
          container
          max-w-screen-sm
          w-full
          hidden
          sm:hidden
          fixed
          top-0
          right-0
          h-screen
          bg-black bg-opacity-40
          z-30
        "
      >
        <nav
          class="
            nav-mobile
            hidden
            fixed
            top-0
            right-0
            flex flex-col
            justify-between
            items-center
            pt-14
            px-12
            pb-5
            bg-white
            w-9/12
            h-3/4
            z-40
          "
        >
          <ul
            class="
              nav__list
              flex flex-col flex-1
              justify-between
              items-center
              container
              box-content
              w-32
              h-auto
              max-h-nav
              text-xs
              font-normal
            "
          >
             <li class="hover:opacity-50">
  
  <a class="nav__link" href="/#work">Work</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/#about">About</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/#join">Join VAC</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/research-log">Research log</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a class="nav__link" href="/media">Media</a>
  
</li>
  <li class="hover:opacity-50">
  
  <a href="https://specs.vac.dev" target="_blank" rel="noopener noreferrer"
    >Specs</a
  >
  
</li>
  <li class="hover:opacity-50">
  
  <a href="https://forum.vac.dev/" target="_blank" rel="noopener noreferrer"
    >Forum</a
  >
  
</li>
 
          </ul>
          <ul class="social items-center flex mt-8">
            <li class="pr-5">
  <a href="https://twitter.com/vacp2p" target="_blank" rel="noopener noreferrer"
    ><svg
      width="25"
      height="21"
      viewBox="0 0 25 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="hover:opacity-50"
    >
      <path
        d="M24.8872 3.04499C23.9872 3.43499 23.0572 3.70498 22.0672 3.82499C23.0872 3.22498 23.8672 2.26499 24.2272 1.09499C23.2672 1.66499 22.2172 2.05499 21.1072 2.29499C20.2072 1.33499 18.9172 0.734985 17.5072 0.734985C14.7772 0.734985 12.5872 2.95499 12.5872 5.65499C12.5872 6.04499 12.6172 6.40498 12.7072 6.76498C8.62721 6.58498 5.02721 4.60498 2.59721 1.63499C0.857207 4.75498 2.80721 7.33499 4.09721 8.20499C3.31721 8.20499 2.53721 7.96499 1.87721 7.60499C1.87721 10.035 3.58721 12.045 5.80721 12.495C5.32721 12.645 4.24721 12.735 3.58721 12.585C4.21721 14.535 6.04721 15.975 8.17721 16.005C6.49721 17.325 4.03721 18.375 0.887207 18.045C3.07721 19.455 5.65721 20.265 8.44721 20.265C17.5072 20.265 22.4272 12.765 22.4272 6.28499C22.4272 6.07499 22.4272 5.86499 22.3972 5.65499C23.4172 4.90499 24.2572 4.03499 24.8872 3.04499Z"
        fill="#151512"
      />
    </svg>
  </a>
</li>
<li class="pr-5">
  <a href="https://github.com/vacp2p" target="_blank" rel="noopener noreferrer"
    ><svg
      width="26"
      height="25"
      viewBox="0 0 26 25"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="hover:opacity-50"
    >
      <path
        d="M12.8857 0.856567C6.26021 0.856567 0.915339 6.20154 0.950043 12.7951C0.9778 18.0687 4.43935 22.5427 9.21766 24.1227C9.81824 24.2327 10.0353 23.864 10.0336 23.5474C10.0321 23.2635 10.0177 22.5129 10.0065 21.5171C6.67274 22.238 5.95552 19.9163 5.95552 19.9163C5.40376 18.5369 4.61433 18.1698 4.61433 18.1698C3.51994 17.4296 4.69151 17.4444 4.69151 17.4444C5.89646 17.5291 6.53549 18.6751 6.53549 18.6751C7.61609 20.4989 9.35182 19.9727 10.0342 19.6665C10.1382 18.8951 10.4459 18.3689 10.7878 18.0702C8.12222 17.7684 5.31483 16.7443 5.29076 12.1708C5.2839 10.8672 5.74629 9.80152 6.50989 8.96619C6.3838 8.66445 5.96641 7.45009 6.61027 5.80766C6.61027 5.80766 7.61658 5.4866 9.9167 7.03094C10.8723 6.76636 11.8976 6.63408 12.9191 6.62962C13.9376 6.63556 14.9658 6.76636 15.9257 7.03242C18.2081 5.48809 19.2163 5.80914 19.2163 5.80914C19.8789 7.45306 19.4743 8.66594 19.3529 8.96767C20.1268 9.80301 20.5959 10.8687 20.6028 12.1723C20.6269 16.7577 17.8272 17.767 15.1558 18.0628C15.5882 18.4314 15.976 19.1597 15.9819 20.273C15.9903 21.8693 15.9821 23.1565 15.9841 23.5474C15.9858 23.867 16.2038 24.2386 16.8122 24.1212C21.5663 22.5397 24.9778 18.0672 24.95 12.7951C24.9153 6.20154 19.5142 0.856567 12.8857 0.856567Z"
        fill="#151512"
      />
    </svg>
  </a>
</li>
<li>
  <a
    href="https://discord.gg/PQFdubGt6d"
    target="_blank"
    rel="noopener noreferrer"
    ><svg
      width="25"
      height="21"
      viewBox="0 0 25 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="hover:opacity-50"
    >
      <path
        d="M22.7861 9.04256C21.8482 5.74455 20.7799 4.04048 20.7627 4.00991C20.7017 3.93459 19.189 2.104 15.5271 0.75L15.0353 2.0764C16.7774 2.72057 18.0116 3.50643 18.6899 4.01419C16.6599 3.40408 14.2431 3.03041 12.1008 3.03041C9.95851 3.03041 7.53775 3.40408 5.50128 4.01419C6.18496 3.50648 7.42744 2.72057 9.17631 2.0764L8.69846 0.75C5.02238 2.104 3.49044 3.93459 3.42863 4.00991C3.41108 4.04048 2.32479 5.74455 1.35221 9.04256C0.414855 12.2208 0.0415214 16.7045 0.027872 16.8843C0.109225 17.0131 1.97891 20.25 7.12077 20.25L8.43406 18.3536C6.97595 17.964 5.58693 17.3357 4.31689 16.4832L5.10228 15.3069C7.15122 16.6822 9.54509 17.4092 12.0251 17.4092C14.5051 17.4092 16.9067 16.6822 18.9701 15.3069L19.7431 16.4832C18.4641 17.3357 17.0684 17.964 15.6062 18.3536L16.8995 20.25C22.0414 20.25 23.9452 17.0131 24.0279 16.8843C24.0161 16.7045 23.69 12.2208 22.7861 9.04256ZM8.79853 12.7392H7.39228L7.40468 10.3841H8.81093L8.79853 12.7392ZM16.7071 12.7392H15.3008L15.3132 10.3841H16.7195L16.7071 12.7392Z"
        fill="#151512"
      />
    </svg>
  </a>
</li>

          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>


      <main class="bg-white text-black flex flex-col"><section
  class="
    container
    max-w-screen-xl
    flex flex-col
    sm:flex-row
    pt-10
    pb-0
    md:pb-10
    lg:pb-0
  "
>
  <div
    class="
      heading-block
      w-full
      sm:w-2/12
      lg:w-3/12
      flex
      lg:justify-center
      items-start
      pb-3
      sm:pb-0
    "
  >
    <a class="link link--back" href="/research-log/">Back</a>
  </div>
  <div
    class="info-block w-full sm:w-10/12 lg:w-9/12 pb-5 sm:pb-10 overflow-hidden"
  >
    <div class="post mb-10">
      <h1 class="text-xl md:text-xxl mb-5 sm:max-w-md lg:max-w-2xl">
        Waku Update
      </h1>
      <div>
        <span class="text-s lg:text-base">
          14 Feb 2020 • by
        </span>
        <a
          href="/authors/oskarth"
          class="text-s lg:text-base font-bold hover:underline"
          >oskarth</a
        >
      </div>
    </div>
    <div class="post__content"><p>Waku is our fork of Whisper where we address the shortcomings of Whisper in an iterative manner. We’ve seen a in <a href="https://vac.dev/fixing-whisper-with-waku">previous post</a> that Whisper doesn’t scale, and why. In this post we’ll talk about what the current state of Waku is, how many users it can support, and future plans.</p>

<h2 id="current-state">Current state</h2>

<p><strong>Specs:</strong></p>

<p>We released <a href="https://specs.vac.dev/specs/waku/waku.html">Waku spec v0.3</a> this week! You can see the full changelog <a href="https://specs.vac.dev/specs/waku/waku.html#changelog">here</a>.</p>

<p>The main change from 0.2 is making the handshake more flexible. This enables us to communicate topic interest immediately without ambiguity. We also did the following:</p>

<ul>
  <li>added recommendation for DNS based discovery</li>
  <li>added an upgradability and compatibility policy</li>
  <li>cut the spec up into several components</li>
</ul>

<p>We cut the spec up in several components to make Vac as modular as possible. The components right now are:</p>

<ul>
  <li>Waku (main spec), currently in <a href="https://specs.vac.dev/specs/waku/waku.html">version 0.3.0</a></li>
  <li>Waku envelope data field, currently in <a href="https://specs.vac.dev/specs/waku/envelope-data-format.html">version 0.1.0</a></li>
  <li>Waku mailserver, currently in <a href="https://specs.vac.dev/specs/waku/mailserver.html">version 0.2.0</a></li>
</ul>

<p>We can probably factor these out further as the main spec is getting quite big, but this is good enough for now.</p>

<p><strong>Clients:</strong></p>

<p>There are currently two clients that implement Waku v0.3, these are <a href="https://github.com/status-im/nimbus/tree/master/waku">Nimbus</a> in Nim and <a href="https://github.com/status-im/status-go">status-go</a> in Go.</p>

<p>For more details on what each client support and don’t, you can follow the <a href="https://github.com/vacp2p/pm/issues/7">work in progress checklist</a>.</p>

<p>Work is currently in progress to integrate it into the <a href="https://github.com/status-im/status-react/pull/9949">Status core app</a>. Waku is expected to be part of their upcoming 1.1 release (see <a href="https://trello.com/b/DkxQd1ww/status-app-roadmap">Status app roadmap</a>).</p>

<p><strong>Simulation:</strong></p>

<p>We have a <a href="https://github.com/status-im/nimbus/tree/master/waku#testing-waku-protocol">simulation</a> that verifies - or rather, fails to falsify - our <a href="https://vac.dev/fixing-whisper-with-waku">scalability model</a>. More on the simulation and what it shows below.</p>

<h2 id="how-many-users-does-waku-support">How many users does Waku support?</h2>

<p>This is our current understanding of how many users a network running Waku can support. Specifically in the context of the Status chat app, since that’s the most immediate consumer of Waku. It should generalize fairly well to most deployments.</p>

<p><strong>tl;dr (for Status app):</strong></p>

<ul>
  <li>beta: 100 DAU</li>
  <li>v1: 1k DAU</li>
  <li>v1.1 (waku only): 10k DAU (up to x10 with deployment hotfixes)</li>
  <li>v1.2 (waku+dns): 100k DAU (can optionally be folded into v1.1)</li>
</ul>

<p><em>Assuming 10 concurrent users = 100 DAU. Estimate uncertainty increases for each order of magnitude until real-world data is observed.</em></p>

<p>As far as we know right now, these are the bottlenecks we have:</p>

<ul>
  <li>Immediate bottleneck - Receive bandwidth for end user clients (aka ‘Fixing Whisper with Waku’)</li>
  <li>Very likely bottleneck - Nodes and cluster capacity (aka ‘DNS based node discovery’)</li>
  <li>Conjecture but not unlikely to appear- Full node traffic (aka ‘the routing / partition problem’)</li>
</ul>

<p>We’ve already seen the first bottleneck being discussed in the initial post. Dean wrote a post on <a href="https://vac.dev/dns-based-discovery">DNS based discovery</a> which explains how we will address the likely second bottleneck. More on the third one in future posts.</p>

<p>For more details on these bottlenecks, see <a href="https://discuss.status.im/t/scalability-estimate-how-many-users-can-waku-and-the-status-app-support/1514">Scalability estimate: How many users can Waku and the Status app support?</a>.</p>

<h2 id="simulation">Simulation</h2>

<p>The ultimate test is real-world usage. Until then, we have a simulation thanks to Kim De Mey from the Nimbus team!</p>

<p><img src="assets/img/waku_simulation.jpeg" alt="" /></p>

<p>We have two network topologies, Star and full mesh. Both networks have 6 full nodes, one traditional light node with bloom filter, and one Waku light node.</p>

<p>One of the full nodes sends 1 envelope over 1 of the 100 topics that the two light nodes subscribe to. After that, it sends 10000 envelopes over random topics.</p>

<p>For light node, bloom filter is set to almost 10% false positive (bloom filter: n=100, k=3, m=512). It shows the number of valid and invalid envelopes received for the different nodes.</p>

<p><strong>Star network:</strong></p>

<table>
  <thead>
    <tr>
      <th>Description</th>
      <th>Peers</th>
      <th>Valid</th>
      <th>Invalid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master node</td>
      <td>7</td>
      <td>10001</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Full node 1</td>
      <td>3</td>
      <td>10001</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Full node 2</td>
      <td>1</td>
      <td>10001</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Full node 3</td>
      <td>1</td>
      <td>10001</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Full node 4</td>
      <td>1</td>
      <td>10001</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Full node 5</td>
      <td>1</td>
      <td>10001</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Light node</td>
      <td>2</td>
      <td>815</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Waku light node</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<p><strong>Full mesh:</strong></p>

<table>
  <thead>
    <tr>
      <th>Description</th>
      <th>Peers</th>
      <th>Valid</th>
      <th>Invalid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Full node 0</td>
      <td>7</td>
      <td>10001</td>
      <td>20676</td>
    </tr>
    <tr>
      <td>Full node 1</td>
      <td>7</td>
      <td>10001</td>
      <td>9554</td>
    </tr>
    <tr>
      <td>Full node 2</td>
      <td>5</td>
      <td>10001</td>
      <td>23304</td>
    </tr>
    <tr>
      <td>Full node 3</td>
      <td>5</td>
      <td>10001</td>
      <td>11983</td>
    </tr>
    <tr>
      <td>Full node 4</td>
      <td>5</td>
      <td>10001</td>
      <td>24425</td>
    </tr>
    <tr>
      <td>Full node 5</td>
      <td>5</td>
      <td>10001</td>
      <td>23472</td>
    </tr>
    <tr>
      <td>Light node</td>
      <td>2</td>
      <td>803</td>
      <td>803</td>
    </tr>
    <tr>
      <td>Waku light node</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>Things to note:</p>

<ul>
  <li>Whisper light node with ~10% false positive gets ~10% of total traffic</li>
  <li>Waku light node gets ~1000x less envelopes than Whisper light node</li>
  <li>Full mesh results in a lot more duplicate messages, expect for Waku light node</li>
</ul>

<p>Run the simulation yourself <a href="https://github.com/status-im/nimbus/tree/master/waku#testing-waku-protocol">here</a>. The parameters are configurable, and it is integrated with Prometheus and Grafana.</p>

<h2 id="difference-between-waku-and-whisper">Difference between Waku and Whisper</h2>

<p>Summary of main differences between Waku v0 spec and Whisper v6, as described in <a href="https://eips.ethereum.org/EIPS/eip-627">EIP-627</a>:</p>

<ul>
  <li>Handshake/Status message not compatible with shh/6 nodes; specifying options as association list</li>
  <li>Include topic-interest in Status handshake</li>
  <li>Upgradability policy</li>
  <li><code class="language-plaintext highlighter-rouge">topic-interest</code> packet code</li>
  <li>RLPx subprotocol is changed from shh/6 to waku/0.</li>
  <li>Light node capability is added.</li>
  <li>Optional rate limiting is added.</li>
  <li>Status packet has following additional parameters: light-node, confirmations-enabled and rate-limits</li>
  <li>Mail Server and Mail Client functionality is now part of the specification.</li>
  <li>P2P Message packet contains a list of envelopes instead of a single envelope.</li>
</ul>

<h2 id="next-steps-and-future-plans">Next steps and future plans</h2>

<p>Several challenges remain to make Waku a robust and suitable base
communication protocol. Here we outline a few challenges that we are addressing and will continue to work on:</p>

<ul>
  <li>scalability of the network</li>
  <li>incentived infrastructure and spam-resistance</li>
  <li>build with resource restricted devices in mind, including nodes being mostly offline</li>
</ul>

<p>For the third bottleneck, a likely candidate for fixing this is Kademlia routing. This is similar to what is done in <a href="https://swarm.ethereum.org/]">Swarm’s</a> PSS. We are in the early stages of experimenting with this over libp2p in <a href="https://github.com/status-im/nim-libp2p">nim-libp2p</a>. More on this in a future post!</p>

<h2 id="acknowledgements">Acknowledgements</h2>

<p><em>Image from “caged sky” by mh.xbhd.org is licensed under CC BY 2.0 (https://ccsearch.creativecommons.org/photos/a9168311-78de-4cb7-a6ad-f92be8361d0e)</em></p>
</div>
  </div>
</section>
</main>
    </div>
    <footer class="footer bg-black flex flex-shrink-0 justify-center">
  <div
    class="
      container
      max-w-screen-xl
      flex
      sl:justify-between
      lm:justify-start
      p-5
      pb-10
      md:px-12 md:pt-5
      lg:pt-10
    "
  >
    <div class="logo mr-10 sm:mr-0 sm:w-2/12 lg:w-3/12">
      <a href="/"
        ><img
          src="/assets/img/logo.png"
          alt="Vac logo"
          class="w-9 h-11"
      /></a>
    </div>

    <div
      class="flex flex-col xm:flex-row xm:justify-between sm:w-10/12 lg:w-9/12"
    >
      <p
        class="
          hidden
          ml:inline-block ml:mr-10
          w-52
          text-base text-white
          opacity-75
          lm:mr-32
        "
      >
        VAC researches peer-to-peer, private, censorship resistant communication
      </p>
      <nav class="flex max-w-xs mr-0 xm:mr-5 l:mr-32 mb-5 sm:mb-0">
        <div class="flex">
          <div class="flex flex-col mr-5 sm:mr-10 sl:mr-14">
            <p class="text-base text-white mb-5 lg:mb-4">Research</p>
            <ul>
               <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://status.im/" target="_blank" rel="noopener noreferrer"
    >Log</a
  >
</li>
  <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://forum.vac.dev/" target="_blank" rel="noopener noreferrer"
    >Forum</a
  >
</li>
  <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://status.im/" target="_blank" rel="noopener noreferrer"
    >Media</a
  >
</li>
  <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://jobs.status.im/?search=Vac" target="_blank" rel="noopener noreferrer"
    >Careers</a
  >
</li>
 
            </ul>
          </div>
          <div class="flex flex-col sl:mr-14">
            <p class="text-base text-white mb-5 lg:mb-4 mr-5">Socials</p>
            <ul>
               <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://twitter.com/vacp2p" target="_blank" rel="noopener noreferrer"
    >Twitter</a
  >
</li>
  <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://discord.gg/PQFdubGt6d" target="_blank" rel="noopener noreferrer"
    >Discord</a
  >
</li>
  <li class="text-xxs lg:text-base text-white opacity-75 hover:opacity-50 mb-5">
  <a href="https://t.me/vacp2p" target="_blank" rel="noopener noreferrer"
    >Telegram</a
  >
</li>
 
            </ul>
          </div>
        </div></nav>

      <div class="flex flex-col w-52">
        <h3 class="text-base text-white mb-5">Signup for updates</h3>
        <form action="" class="footer__form">
          <div class="flex items-center w-full">
            <input
              class="
                text-xs text-white
                w-full
                bg-black
                border-b border-white
                rounded-none
                mr-2
                focus:outline-none
                placeholder-white placeholder-opacity-50
              "
              type="email"
              placeholder="your email"
              required
            />
            <button
              class="
                h-10
                w-10
                bg-arrowWhite bg-auto bg-no-repeat bg-left
                focus:outline-none
                hover:opacity-50
              "
              type="submit"
            ></button>
          </div>
        </form>
        <p
          class="footer__confirm text-base italic text-white opacity-75 hidden"
        >
          You signed up! Check your e-mail
        </p>
      </div>
    </div>
  </div>
</footer>
 <script src="/assets/js/main.js"></script>
<script src="/assets/js/smooth-scroll.js"></script>

  </body>
</html>
